<!-- 
3DHOP version 4.3 

i3mainz - Instititut für Raumbezogenen Inforamtions- und Messtechnik der Hochschule Mainz
Leibniz-Zentrum für Archäologie - LEIZA

-->

<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>3DHOP</title>
<!--STYLESHEET-->
<link type="text/css" rel="stylesheet" href="stylesheet/3dhop.css"/> 
<link type="text/css" rel="stylesheet" href="stylesheet/3dhop_added.css"/> 
<!--SPIDERGL-->
<script type="text/javascript" src="js/spidergl.js"></script>
<!--JQUERY-->
<script type="text/javascript" src="js/jquery.js"></script>
<!--PRESENTER-->
<script type="text/javascript" src="js/presenter.js"></script>
<!--3D MODELS LOADING AND RENDERING-->
<script type="text/javascript" src="js/nexus.js"></script>
<script type="text/javascript" src="js/ply.js"></script>
<!--TRACKBALLS-->
<script type="text/javascript" src="js/trackball_sphere.js"></script>
<script type="text/javascript" src="js/trackball_turntable.js"></script>
<script type="text/javascript" src="js/trackball_turntable_pan.js"></script>
<script type="text/javascript" src="js/trackball_pantilt.js"></script>
<!--UTILITY-->
<script type="text/javascript" src="js/init.js"></script>
<script type="text/javascript" src="js/init_added.js"></script>
</head>

<body>
	<div id="3dhop" class="tdhop" onmousedown="if (event.preventDefault) event.preventDefault()">
		<div id="tdhlg"></div>
		<div id="title">Modell & Ausformung</div>
		<div id="toolbar">
			<img id="help_on" title="Hide Help" src="skins/dark/help_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="help" title="Show Help" src="skins/dark//help.png"/><br/>
			<!--<img id="meta_on" title="Hide Metadata" src="skins/icons_added/metadata_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="meta" title="Show Metadata" src="skins/icons_added/metadata.png"/><br/>-->
			<img id="home" title="Home" src="skins/dark/home.png" /><br/>
			<img id="zoomin" title="Zoom In" src="skins/dark/zoomin.png" /><br/>
			<img id="zoomout" title="Zoom Out" src="skins/dark/zoomout.png" /><br/>
			<img id="view_on" title="Disable Predefined Views" src="skins/icons_added/view_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="view" title="Enable Predefined Views" src="skins/icons_added/view.png"/><br/>
			<!--<img id ="ortho_on" title="Ortho on" src="skins/icons_added/ortho_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="ortho" title="Ortho off" src="skins/icons_added/ortho.png"/><br/>-->
			<img id="light_on" title="Disable Light Control" src="skins/dark/light_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="light" title="Enable Light Control" src="skins/dark/light.png" /><br/>
			<img id="color_on" title="Disable Color Control" src="skins/icons_added/color_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="color" title="Enable Color Control" src="skins/icons_added/color.png"/><br/>
			<img id="sections_on" title="Disable Plane Sections" src="skins/dark/sections_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="sections" title="Enable Plane Sections" src="skins/dark/sections.png" /><br/>
			<img id="pick_on"    title="Disable PickPoint Mode"src="skins/dark/pick_on.png"         style="position:absolute; visibility:hidden;"/>
			<img id="pick"       title="Enable PickPoint Mode" src="skins/dark/pick.png"            /><br/>  
			<!--<img id="rotcenter_on" title="Define Rotation Center"src="skins/icons_added/rotate_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="rotcenter" title="Define Rotation Center" src="skins/icons_added/rotate.png" /><br/> -->
			<img id="measure_on" title="Disable Measure Tool" src="skins/dark/measure_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="measure" title="Enable Measure Tool" src="skins/dark/measure.png"/><br/>
			<img id="screenshot"   title="Save Screenshot"       src="skins/dark/screenshot.png"      /><br/>
			<img id="hotspot_on" title="Hide Hotspots"         src="skins/dark/pin_on.png"          style="position:absolute; visibility:hidden;"/>
			<img id="hotspot"    title="Show Hotspots"         src="skins/dark/pin.png"             /><br/>
			<img id="full_on" title="Exit Full Screen" src="skins/dark/full_on.png" style="position:absolute; visibility:hidden;"/>
			<img id="full" title="Full Screen" src="skins/dark/full.png" /><br/>	
		</div>
			
		<div>
			<table id="help_pane" cellspacing="10">
				<tbody>
					<tr><td><p><img title="Home" alt="Home" src="skins/dark/home.png" />Initial View</p></td></tr>
					<tr><td><p><img title="Zoom In" alt="Zoom In" src="skins/dark/zoomin.png" />Zoom in</p></td></tr>
					<tr><td><p><img title="Zoom Out" alt="Zoom Out" src="skins/dark/zoomout.png" />Zoom out</p></td></tr>
					<tr><td><p><img title="Predefined Views" alt="Predefined Views" src="skins/icons_added/view.png" />Switch predefined view (front/back/left/....)</p></td></tr>
					<!--<tr><td><p><img title="Ortho Mode" alt="Ortho Control" src="skins/icons_added/ortho.png" />Switch view (perspective / ortho)</p></td></tr> -->
					<tr><td><p><img title="Light Control" alt="Light Control" src="skins/dark/light.png" />Enable light control</p></td></tr>
					<tr><td><p><img title="Color Control" alt="Color Control" src="skins/icons_added/color.png" />Switch texture mode / solid mode</p></td></tr>	
					<tr><td><p><img title="Plane Sections" alt="Plane Sections" src="skins/dark/sections.png" />Enable plane sections </p></td></tr>
					<tr><td><p><img title="PickPoint Mode" alt="PickPoint Mode" src="skins/dark/pick.png" />Pick point coordinates</p></td></tr>
					<tr><td><p><img title="Measure Tool" alt="Measure Tool" src="skins/dark/measure.png" />Enable Measure tool</p></td></tr>
					<tr><td><p><img title="Screenshot Tool" alt="Screenshot Tool" src="skins/dark/screenshot.png" />Create Screenshot</p></td></tr>
					<tr><td><p><img title="Full Screen" alt="Full Screen" src="skins/dark/full.png" />Full Screen</p></td></tr>
					<!--<tr><td><p><img title="Full Screen" alt="Full Screen" src="skins/dark/full.png" />Switch Full Screen</p></td></tr>	-->
					<!--<tr><td align="center"><hr/></td></tr>
					<tr> <td><p>before conservation: 3d model of the not conserved object</p></td></tr>
					<tr> <td><p>after conservation: 3d model of the conserved object</p></td></tr>
					<tr> <td><p>changes: colored  differences between 3d-model of the conserved object and not conserved object mapped on the 3-model of the convserved object</p></td></tr> -->
				</tbody>
			</table>
		</div>

		<div id="dataset">
			<table >
				<tr><td align="center" colspan="2">switch visibility of model<hr/></td></tr>
				<tr >
					<td align="left">
						<button id="data1" title="before conservation status on/off"  onclick="data1Switch(true)" style="position:absolute; visibility:hidden;" >Model</button>
						<button id="data1_on" title="before conservation status on/off"  onclick="data1Switch(false)" style="color:#00ff00; visibility:visible;">Model</button>
					</td>
					<td  align="center">
						<img id="metadata1" title="Hide Metadata" src="skins/icons_added/metadata.png" onclick="metaSwitch01(true,jsonData01,jsonfull01)" style="position:absolute; visibility:visible;"/>
						<img id="metadata1_on" title="Show Metadata" src="skins/icons_added/metadata_on.png" onclick="metaSwitch01(false,jsonData01,jsonfull01)"  style="visibility:hidden;"/>
					</td>
				</tr>
				<tr>
					<td align="left">
						<button id="data2" title="after conservation status on/off"  onclick="data2Switch(true)" style="position:absolute; visibility:visible;" >Ausformung</button>
						<button id="data2_on" title="after conservation status on/off"  onclick="data2Switch(false)" style="color:#00ff00; visibility:hidden;">Ausformung</button>
					</td>
				</td>
				<td  align="center">
					<img id="metadata2" title="Hide Metadata" src="skins/icons_added/metadata.png" onclick="metaSwitch02(true,jsonData02,jsonfull02)" style="position:absolute; visibility:visible;"/>
					<img id="metadata2_on" title="Show Metadata" src="skins/icons_added/metadata_on.png" onclick="metaSwitch02(false,jsonData02,jsonfull02)"  style="visibility:hidden;"/>
				</td>
				</tr>
			</table>
		</div>

		<div>
			<table id="meta_pane" cellspacing="10">
				<tbody>
					<tr>
						<td id="info_text">
							<p><b>3D-Metadaten:</b><br />
							<ul id="scan_metadata"></ul>
						</td>
					</tr>
					<td style="text-align: center; vertical-align: middle;">
						<button id="scan_metadata_full">Open full metadata in new Tab</button>
					</td>
				</tbody>
			</table>
		</div>

<!-- 
		<div>
			<table id="meta_pane" cellspacing="10">
				<tbody>
					<tr>
						<td id="info_text">
							<p>
								<b>3D-Metadaten:</b>
								<br/>
							<ul id="scan_metadata"></ul>
						</td>
					</tr>
					<td style="text-align: center; vertical-align: middle;">
						<button onclick='window.open("metadata/Objekt_29_texture_meta_agisoft.json","_blank")'>Open full metadata in new Tab</button>
					</td>
				</tbody>
			</table>
		</div> -->

		<!-- Front View Orientation: Y is Up -->
		<div id="view-box" class="output-box">
			<table class="output-table" onmousedown="event.stopPropagation()">
				<tr><td colspan="3">Select View</td></tr>
				<tr><td colspan="3"><hr/></td></tr>
				<tr>
					<td><img id="viewfront" title="Front View" src="skins/icons_added/viewfront.png" onclick="presenter.animateToTrackballPosition([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]);" ;/><br/></td>
					<td><img id="viewleft" title="Left View" src="skins/icons_added/viewleft.png" onclick="presenter.animateToTrackballPosition([0, 0, -1, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);";/><br/></td>
					<td><img id="viewtop" title="Top View" src="skins/icons_added/viewtop.png" onclick="presenter.animateToTrackballPosition([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);";/><br/></td>
				</tr>
				<tr>
					<td><img id="viewback" title="Back View" src="skins/icons_added/viewback.png" onclick="presenter.animateToTrackballPosition([-1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1]);"  style = "width:50px;height:50px";/><br/></td>
					<td><img id="viewright" title="Right View" src="skins/icons_added/viewright.png" onclick="presenter.animateToTrackballPosition([0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);"  style = "width:50px;height:50px";/><br/></td>
					<td><img id="viewbottom" title="Bottom View" src="skins/icons_added/viewbottom.png" onclick="presenter.animateToTrackballPosition([1, 0, 0, 0, 0, -1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1]);"  style = "width:50px;height:50px";/><br/></td>
				</tr>
			</table>
		</div>

		<!-- Front View Orientation: X is Up
		<div id="view-box" class="output-box">
			<table class="output-table" onmousedown="event.stopPropagation()">
				<tr><td colspan="3">Select View</td></tr>
				<tr><td colspan="3"><hr/></td></tr>
				<tr>
					<td><img id="viewfront" title="Front View" src="skins/icons_added/viewfront.png" onclick="presenter.animateToTrackballPosition([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);" ;/><br/></td>
					<td><img id="viewleft" title="Left View" src="skins/icons_added/viewleft.png" onclick="presenter.animateToTrackballPosition([0,0,-1,0,0,1,0,0,1,0,0,0,0,0,0,1]);";/><br/></td>
					<td><img id="viewtop" title="Top View" src="skins/icons_added/viewtop.png" onclick="presenter.animateToTrackballPosition([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);";/><br/></td>
				</tr>
				<tr>
					<td><img id="viewback" title="Back View" src="skins/icons_added/viewback.png" onclick="0.5,-0.2,0.8,0,-0.3,0.9,0.3,0,-0.8,-0.4,0.4,0,0,0,0,1([-1,0,0,0,0,1,0,0,0,0,-1,0,0,0,0,1]);"  style = "width:50px height:50px";/><br/></td>
					<td><img id="viewright" title="Right View" src="skins/icons_added/viewright.png" onclick="presenter.animateToTrackballPosition([0,0,1,0,0,1,0,0,-1,0,0,0,0,0,0,1]);"  style = "width:50px height:50px";/><br/></td>
					<td><img id="viewbottom" title="Bottom View" src="skins/icons_added/viewbottom.png" onclick="presenter.animateToTrackballPosition([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]);"  style = "width:50px height:50px";/><br/></td>
				</tr>
			</table>
		</div>
		-->

		<div id="color-box" class="output-box">
			<table class="output-table" onmousedown="event.stopPropagation()">
				<tr><td colspan="1">Set Solid Color</td></tr>
				<tr><td><input 	id="color-range" type="color" value="#88b04b" onchange="solidcolorSwitch();" style="border-radius:5px;"	/></td></tr>
			</table>
		</div>

		<div id="pickpoint-box" class="output-box">
			XYZ picked point [m]<hr/>
			<span id="pickpoint-output" class="output-text" onmousedown="event.stopPropagation()">[ 0 , 0 , 0 ]</span>
		</div>

		<div id="measure-box" class="output-box">
			Measured length [m]<hr/>
			<span id="measure-output" class="output-text" onmousedown="event.stopPropagation()">0.0</span>
		</div>

		<div id="sections-box" class="output-box">
			<table class="output-table" onmousedown="event.stopPropagation()">
				<tr><td>Plane</td><td>Position</td><td>Flip</td></tr>
				<tr><td><hr/></td><td><hr/></td><td><hr/></td></tr>
				<tr>
					<td><img id="xplane_on" title="Disable X Axis Section" src="skins/icons_added/viewright.png" onclick="sectionxSwitch()" style="position:absolute; visibility:hidden; border:1px inset;"/>
						<img id="xplane" title="Enable X Axis Section" src="skins/icons_added/section-right.png" onclick="sectionxSwitch()"/><br/></td>
					<td><input id="xplaneSlider" class="output-input" type="range" title="Move X Axis Section Position"/></td> 
					<td><input id="xplaneFlip" class="output-input" type="checkbox" title="Flip X Axis Section Direction"/></td></tr>
				<tr>
					<td><img id="yplane_on" title="Disable Y Axis Section" src="skins/icons_added/viewback.png" onclick="sectionySwitch()" style="position:absolute; visibility:hidden; border:1px inset;"/>
						<img id="yplane" title="Enable Y Axis Section" src="skins/icons_added/section-back.png" onclick="sectionySwitch()"/><br/></td>
					<td><input id="yplaneSlider" class="output-input" type="range" title="Move Y Axis Section Position"/></td> 
					<td><input id="yplaneFlip" class="output-input" type="checkbox" title="Flip Y Axis Section Direction"/></td></tr>
				<tr>
					<td><img id="zplane_on" title="Disable Z Axis Section" src="skins/icons_added/viewtop.png" onclick="sectionzSwitch()" style="position:absolute; visibility:hidden; border:1px inset;"/>
						<img id="zplane" title="Enable Z Axis Section" src="skins/icons_added/section-top.png" onclick="sectionzSwitch()"/><br/></td>
					<td><input id="zplaneSlider" class="output-input" type="range" title="Move Y Axis Section Position"/></td> 
					<td><input id="zplaneFlip" class="output-input" type="checkbox" title="Flip Z Axis Section Direction"/></td></tr>
			</table>
			<table class="output-table" onmousedown="event.stopPropagation()" style="text-align:right;">
				<tr>
				<td>Show planes<input id="showPlane" class="output-input" type="checkbox" title="Show Section Planes"/></td>
				<td>Show edges<input id="showBorder" class="output-input" type="checkbox" title="Show Section Edges"/></td></tr>
			</table>
		</div>

		<canvas id="draw-canvas" style="background-image: none"/>

	</div> 
</body>

<script type="text/javascript">
	var presenter = null;

	function loadData(url){
		var data = {}
		$.getJSON(url, function (metadata){ data.config = metadata})
		//console.log(data)
		return data
		}
	jsonData01= loadData('metadata/F_2024_00021_Model_meta_agisoft_3dhop.json')
	jsonData02= loadData('metadata/F_2024_00022_Ausformung_meta_agisoft_3dhop.json')
	jsonfull01 = 'metadata/F_2024_00021_Model_meta_agisoft.json'
	jsonfull02 = 'metadata/F_2024_00022_Ausformung_meta_agisoft.json'

	function setup3dhop() { 
		presenter = new Presenter("draw-canvas");
		presenter.setScene({
			meshes: {
				"dataset01" : { url: "https://sparqlunicorn.cloud/F_2024_00021_Model.nxz"},
				"dataset02" : { url: "https://sparqlunicorn.cloud/F_2024_00022_Ausformung.nxz"},
				"Sphere": { url: "models/sphere.ply"},
			},
			modelInstances : { 
				"model01" : { mesh : "dataset01", tags: ['ds01'], useSolidColor: false, color: [0.7, 0.7, 0.7], visible: true,},
				"model02" : { mesh : "dataset02", tags: ['ds02'], useSolidColor: false, color: [0.7, 0.7, 0.7], visible: false,}
			},
			spots : {
			"M_-_Point_1" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([45.864115,29.387174,8,815272]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_2" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-19.84691,51.954639,10.270536]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_3" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-33.981774,-43.352188,10.2382]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_4" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-21.436621,-51.468587,11.1193]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_5" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-28.173667,-39.712376,-1.083734]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_6" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([17.420316,39.3434,-8.330571]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_7" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([32.090924,47.383977,14.012882]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_8" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([22.854272,58.237333,28.773861]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_9" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-18.541322,59.966956,30.009659]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_10" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-1.792212,64.456569,32.704285]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_11" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-11.641929,58.083635,18.927881]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_12" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-6.132488,58.307356,16.62698]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_13" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([8.551597,58.783109,18.866106]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_14" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([33.691945,49.791441,21.201066]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"M_-_Point_15" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([39.405352,40.351135,11.890728]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [0,0,1],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_1" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([42.939597,24.059913,9.785669]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_2" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-16.204388,45.132338,10.825785]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_3" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-28.799105,-40.379676,9.343519]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_4" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-17.080934,-48.03458,10.126623]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_5" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-23.332296,-37.36435,-0.241123]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_6" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([16.507397,33.117284,-5.190992]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_7" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([30.362316,40.523712,14.543812]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_8" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([21.997606,49.55004,28.015321]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_9" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-15.320353,51.590455,28.544179]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_10" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-0.205617,54.482619,29.38621]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_11" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-8.929681,50.421618,18.584962]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_12" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([-4.003057,50.570746,17.069575]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_13" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([9.537794,50.661045,18.943586]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_14" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([31.999789,42.531353,22.449495]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			},
			"A_-_Point_15" : {
				mesh : "Sphere",
				transform : { matrix: SglMat4.mul(SglMat4.translation([37.651417,33.670222,12.976585]), SglMat4.scaling([0.6,0.6,0.6]))},
				color     : [1, 0, 0],
				alpha     : 1,
				alphaHigh : 0.7,
				visible: false
			}

		},
			trackball: {
				type : SphereTrackball,
				trackOptions : {
					startDistance : 2.5,
					minMaxDist: [0, 3.0]
					// minMaxDist: [0.1, 3.0]
				}
			},
			space: {
			centerMode       : "scene",
			radiusMode       : "scene",
			cameraFOV        : 30.0,
			cameraNearFar    : [0.01, 20.0],
			// cameraType       : "perspective",
			// sceneLighting    : true
		},
		// 	space : {
		// 	centerMode : "scene",
		// 	radiusMode : "specific",
		// 	whichInstanceRadius  : "Base",
		// 	explicitCenter   : [0.0, 70.0, 0.0]
		// },
			config : {
				showClippingPlanes : true,
				showClippingBorder : true,
				clippingBorderSize : 0.5,
				clippingBorderColor : [0.0, 1.0, 1.0]
			}
		});
		
		presenter._onEndPickingPoint = onEndPick;
		presenter._onEndMeasurement = onEndMeasure;
		presenter.setCameraOrthographic();
		//presenter.setTrackballPosition([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]);
		presenter.resetTrackball();
		presenter._onPickedSpot = onPickedSpot;
		presenter._onPickedInstance = onPickedInstance;
	}

	function actionsToolbar(action) {
		if(action=='help'  || action=='help_on') helpSwitch();
		else if(action=='meta' ) metaSwitch(true,jsonData01);
		else if(action=='meta_on') metaSwitch(false,jsonData01);
		//else if(action=='home') presenter.resetTrackball(), presenter.setTrackballPosition([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]);
		//else if(action=='home') presenter.resetTrackball(), presenter.setTrackballPosition([0.5,-0.2,0.8,0,-0.3,0.9,0.3,0,-0.8,-0.4,0.4,0,0,0,0,1]);
		else if(action=='home') presenter.resetTrackball();
		else if(action=='ortho') { orthopanelSwitch(true);}
		else if(action=='ortho_on') { orthopanelSwitch(false); }
		else if(action=='zoomin') presenter.zoomIn();
		else if(action=='zoomout') presenter.zoomOut();
		else if(action=='view') { viewpanelSwitch(true);}
		else if(action=='view_on') { viewpanelSwitch(false); }
		else if(action=='light' || action=='light_on') { presenter.enableLightTrackball(!presenter.isLightTrackballEnabled()); lightSwitch(); }
		else if(action=='measure' || action=='measure_on') { presenter.enableMeasurementTool(!presenter.isMeasurementToolEnabled()); measureSwitch(); } 
		//else if(action=='rotcenter' || action=='rotcenter_on') 	{ presenter.enablePickpointMode(!presenter.isPickpointModeEnabled()); rotcenterSwitch(); }
		else if(action=='pick' 		|| action=='pick_on') 		{ presenter.enablePickpointMode(!presenter.isPickpointModeEnabled()); pickpointSwitch(); } 
		else if(action=='sections' || action=='sections_on') { sectiontoolReset(); sectiontoolSwitch(); }
		//else if(action=='color') { colorpanelSwitch(true); }
		//else if(action=='color_on') { colorpanelSwitch(false); }
		else if(action=='color' || action=='color_on') { presenter.toggleInstanceSolidColor(HOP_ALL,true); }
		else if(action=='screenshot') presenter.saveScreenshot();
		else if(action=='hotspot'|| action=='hotspot_on') { presenter.toggleSpotVisibility(HOP_ALL, true); presenter.enableOnHover(!presenter.isOnHoverEnabled()); hotspotSwitch(); }
		else if(action=='full' || action=='full_on') fullscreenSwitch();
	}
		
	function onPickedSpot(id) {
		switch(id) {
			case 'M_-_Point_1': alert("Punkt 1 (Model)"); break;
			case 'M_-_Point_2': alert("Punkt 2 (Model)"); break;
			case 'M_-_Point_3': alert("Punkt 3 (Model)"); break;
			case 'M_-_Point_4': alert("Punkt 4 (Model)"); break;
			case 'M_-_Point_5': alert("Punkt 5 (Model)"); break;
			case 'M_-_Point_6': alert("Punkt 6 (Model)"); break;
			case 'M_-_Point_7': alert("Punkt 7 (Model)"); break;
			case 'M_-_Point_8': alert("Punkt 8 (Model)"); break;
			case 'M_-_Point_9': alert("Punkt 9 (Model)"); break;
			case 'M_-_Point_10': alert("Punkt 10 (Model)"); break;
			case 'M_-_Point_11': alert("Punkt 11 (Model)"); break;
			case 'M_-_Point_12': alert("Punkt 12 (Model)"); break;
			case 'M_-_Point_13': alert("Punkt 13 (Model)"); break;
			case 'M_-_Point_14': alert("Punkt 14 (Model)"); break;
			case 'M_-_Point_15': alert("Punkt 15 (Model)"); break;
			case 'A_-_Point_1': alert("Punkt 1 (Ausformung)"); break;
			case 'A_-_Point_2': alert("Punkt 2 (Ausformung)"); break;
			case 'A_-_Point_3': alert("Punkt 3 (Ausformung)"); break;
			case 'A_-_Point_4': alert("Punkt 4 (Ausformung)"); break;
			case 'A_-_Point_5': alert("Punkt 5 (Ausformung)"); break;
			case 'A_-_Point_6': alert("Punkt 6 (Ausformung)"); break;
			case 'A_-_Point_7': alert("Punkt 7 (Ausformung)"); break;
			case 'A_-_Point_8': alert("Punkt 8 (Ausformung)"); break;
			case 'A_-_Point_9': alert("Punkt 9 (Ausformung)"); break;
			case 'A_-_Point_10': alert("Punkt 10 (Ausformung)"); break;
			case 'A_-_Point_11': alert("Punkt 11 (Ausformung)"); break;
			case 'A_-_Point_12': alert("Punkt 12 (Ausformung)"); break;
			case 'A_-_Point_13': alert("Punkt 13 (Ausformung)"); break;
			case 'A_-_Point_14': alert("Punkt 14 (Ausformung)"); break;
			case 'A_-_Point_15': alert("Punkt 15 (Ausformung)"); break;
		}
	}


	function onEndPick(point) {
		var decimalClipper = 1000; // 10 = 1 decimal, 100 = 2 decimals, 1000 = 3 decimals
		var x = Math.round(point[0]*decimalClipper)/decimalClipper;
		var y = Math.round(point[1]*decimalClipper)/decimalClipper;
		var z = Math.round(point[2]*decimalClipper)/decimalClipper;
		$('#pickpoint-output').html("[ "+x+" , "+y+" , "+z+" ]");
		//rotate Center //
		//presenter.setCenterModeExplicit([x , y , z]); 
	}

	function onEndMeasure(distance) {
		var decimalClipper = 1000; // 10 = 1 decimal, 100 = 2 decimals, 1000 = 3 decimals
		$('#measure-output').html(Math.round(distance*decimalClipper)/decimalClipper);
	}

	function onEndMeasure(measure, p1, p2) {
		// depending on the model measure units, use "mm","m","km" or whatever you have
		$('#measure-output').html(measure.toFixed(2) + " mm");
		$('#measure-output').append("<hr>"+"P1: [ "+p1[0].toFixed(2)+" , "+p1[1].toFixed(2)+" , "+p1[2].toFixed(2)+" ]");
		$('#measure-output').append("<br>"+"P2: [ "+p2[0].toFixed(2)+" , "+p2[1].toFixed(2)+" , "+p2[2].toFixed(2)+" ]");
	}

	$(document).ready(function(){
		init3dhop();
		setup3dhop();
		sectiontoolInit();
		showPanels();
		
	});
</script>

</html>


